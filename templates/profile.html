{% extends 'base.html' %}

{%load static%}

{% block title %}Profile{% endblock %}
{% block content %}
<div class="container" id="container">
  <h2 class="text-center my-4">Profile</h2>
  <div class="card-primary mx-auto mx-5" style="max-width: 600px;">
    <div class="card-body">
      <div class="text-center mb-4">
        {% if user.profile_photo %}
        <img src="{{ user.profile_photo.url }}" alt="Profile Photo" class="img-thumbnail rounded-circle"
          style="width: 150px; height: 150px;">
        {% else %}
        <img src="{% static 'images/profile.jpg' %}" alt="load Profile Photo" class="img-thumbnail rounded-circle"
          style="width: 150px; height: 150px;">
        {% endif %}
        <p class="text-secondary mt-2 mb-4">@{{user.username}}</p>
      </div>
      <div class="d-flex">
        <div class="form-group ml-4">
          <label>First Name:</label>
          <p>{{ user.first_name }}</p>
        </div>
        <div class="form-group">
          <label>Last Name:</label>
          <p>{{ user.last_name }}</p>
        </div>
      </div>
      <div class="form-group">
        <div class="d-flex">
          <label>Phone:</label>
          <p>{{ user.phone }}</p>
        </div>
      </div>
      <div class="form-group">
        <div class="d-flex">
          <label>Position:</label>
          <p>{{ user.position }}</p>
        </div>
      </div>
      <div class="form-group">
        <div class="d-flex">
          <label>Course:</label>
          <p>{{ user.course }}</p>
        </div>
      </div>
      <div class="form-group">
        <div class="d-flex">
          <label>Year:</label>
          <p>{{ user.year }}</p>
        </div>
      </div>
      <div class="form-group">
        <div class="d-flex">
          <label>Department:</label>
          <p>{{ user.department }}</p>
        </div>
      </div>
    </div>
    <button class="btn btn-primary" id="update-btn">Edit profile</button>
  </div>
</div>



<div class="container" id="container-update" style="display: none;">
  <h2 class="text-center my-4">Profile</h2>
  <div class="card-primary mx-auto mx-5" style="max-width: 600px;">
    <div class="card-body">
      <form action="{% url 'profile' %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
      <div class="text-center mb-4">
        {% if user.profile_photo %}
        <img src="{{ user.profile_photo.url }}" alt="Profile Photo" class="img-thumbnail rounded-circle"
          style="width: 150px; height: 150px;">
        {% else %}
        <img src="{% static 'images/profile.jpg' %}" alt="load Profile Photo" class="img-thumbnail rounded-circle"
          style="width: 150px; height: 150px;">
        {% endif %}
        <p class="text-secondary mt-2 mb-4">@{{user.username}}</p>
      </div>
      
    
      
        <div class="form-group ml-4">
          <input type="file" class="form-control mb-2" name="photo" id="">
        </div>
        <div class="form-group ml-4">
          <input type="text" class="form-control mb-2" name="first_name" id="" value="{{user.first_name}}" placeholder="First Name">
        </div>
        <div class="form-group">
          <input type="text" name="last_name" id="" class="form-control mb-2" value="{{user.last_name}}" placeholder="Last Name">
      </div>
      <div class="form-group">
         <input type="number" class="form-control mb-2" name="phone" id="" value="{{user.phone}}">
        </div>
      <div class="form-group">
         <p class="form-control">{{user.position}}</p>
      </div>
      <div class="form-group">
          <input type="text" class="form-control mb-2" name="course" id="" value="{{user.course}}">
      </div>
      <div class="form-group">
        <select name="year" id="" class="form-control mb-2">
          <option value="{{user.year}}" selected disabled>{{user.year}}</option>
          <option value="1" >1st Year</option>
          <option value="2">2nd Year</option>
          <option value="3">3rd Year</option>
          <option value="4">4th Year</option>
        </select>
      </div>
      <div class="form-group">
       <input type="text" class="form-control mb-2" name="department" id="" value="{{user.department}}">
      </div>
    </div>
    <button type="submit" class="btn btn-primary" id="update-btn">Upadte</button>
  </form>
  </div>

</div>
<script>
  const updateBtn = document.getElementById('update-btn');
  const container = document.getElementById('container');
  const containerUpdate = document.getElementById('container-update');
  
  updateBtn.addEventListener('click', () => {
    container.style.display = 'none';
    containerUpdate.style.display = 'block';
    
  });
</script>
{% endblock %}

{% block footer %}

{% endblock %}